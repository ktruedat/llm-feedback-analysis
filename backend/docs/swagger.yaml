basePath: /api
definitions:
  requests.CreateFeedbackRequest:
    description: Request payload for creating a new feedback submission.
    properties:
      comment:
        description: Feedback comment text, 1-1000 characters (required)
        example: Really nice!
        type: string
      rating:
        description: Rating value from 1 to 5 (required)
        example: 5
        maximum: 5
        minimum: 1
        type: integer
    required:
    - rating
    type: object
  requests.LoginUserRequest:
    description: Request payload for user login/authentication.
    properties:
      email:
        description: User email address (required)
        example: user@example.com
        type: string
      password:
        description: User password (required)
        example: SecurePassword123!
        type: string
    required:
    - email
    - password
    type: object
  requests.RegisterUserRequest:
    description: Request payload for registering a new user account.
    properties:
      email:
        description: User email address (required, must be valid email)
        example: user@example.com
        type: string
      password:
        description: User password (required, minimum 8 characters)
        example: SecurePassword123!
        minLength: 8
        type: string
    required:
    - email
    - password
    type: object
  responses.AnalysisDetailResponse:
    description: Response payload containing detailed analysis with topics and feedback
      IDs.
    properties:
      analysis:
        $ref: '#/definitions/responses.AnalysisResponse'
      feedbacks:
        items:
          $ref: '#/definitions/responses.FeedbackWithTopicsResponse'
        type: array
      topics:
        items:
          $ref: '#/definitions/responses.TopicAnalysisResponse'
        type: array
    type: object
  responses.AnalysisListResponse:
    description: Response payload containing a list of analyses.
    properties:
      analyses:
        items:
          $ref: '#/definitions/responses.AnalysisResponse'
        type: array
      total:
        example: 10
        type: integer
    type: object
  responses.AnalysisResponse:
    description: Response payload containing analysis details.
    properties:
      analysis_duration_ms:
        example: 5000
        type: integer
      completed_at:
        type: string
      created_at:
        example: "2024-01-01T00:00:00Z"
        type: string
      failure_reason:
        type: string
      feedback_count:
        example: 100
        type: integer
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      key_insights:
        items:
          type: string
        type: array
      model:
        example: gpt-5-mini
        type: string
      new_feedback_count:
        type: integer
      overall_summary:
        type: string
      period_end:
        example: "2024-01-31T23:59:59Z"
        type: string
      period_start:
        example: "2024-01-01T00:00:00Z"
        type: string
      previous_analysis_id:
        type: string
      sentiment:
        example: positive
        type: string
      status:
        example: success
        type: string
      tokens:
        example: 5000
        type: integer
    type: object
  responses.FeedbackListResponse:
    description: Response payload containing a list of feedback entries.
    properties:
      feedbacks:
        description: List of feedback entries
        items:
          $ref: '#/definitions/responses.FeedbackResponse'
        type: array
      total:
        description: Total number of feedback entries
        example: 10
        type: integer
    type: object
  responses.FeedbackResponse:
    description: Response payload containing feedback details.
    properties:
      comment:
        description: Feedback comment text
        example: Great service!
        type: string
      created_at:
        description: Creation timestamp
        example: "2024-01-01T00:00:00Z"
        type: string
      deleted_at:
        description: Deletion timestamp (if deleted)
        example: "2024-01-01T00:00:00Z"
        type: string
      id:
        description: Feedback unique identifier
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      rating:
        description: Rating value from 1 to 5
        example: 5
        type: integer
      updated_at:
        description: Last update timestamp
        example: "2024-01-01T00:00:00Z"
        type: string
    type: object
  responses.FeedbackWithTopicsResponse:
    description: Response payload containing feedback details with associated topics.
    properties:
      comment:
        example: Great product!
        type: string
      created_at:
        example: "2024-01-01T00:00:00Z"
        type: string
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      rating:
        example: 5
        type: integer
      topics:
        description: Topic enum values
        items:
          type: string
        type: array
    type: object
  responses.LoginUserResponse:
    description: Response payload containing authentication token and user details.
    properties:
      expires_in:
        description: Token expiration time in seconds
        example: 3600
        type: integer
      token:
        description: JWT authentication token
        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        type: string
      user:
        allOf:
        - $ref: '#/definitions/responses.UserInfo'
        description: User information including roles
    type: object
  responses.RegisterUserResponse:
    description: Response payload containing user registration details.
    properties:
      created_at:
        description: Account creation timestamp
        example: "2024-01-01T00:00:00Z"
        type: string
      email:
        description: User email address
        example: user@example.com
        type: string
      id:
        description: User unique identifier
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
    type: object
  responses.TopicAnalysisResponse:
    description: Response payload containing topic analysis details.
    properties:
      created_at:
        example: "2024-01-01T00:00:00Z"
        type: string
      feedback_count:
        example: 10
        type: integer
      id:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      sentiment:
        example: positive
        type: string
      summary:
        type: string
      topic:
        example: product_functionality_features
        type: string
      topic_name:
        example: Product Functionality & Features
        type: string
      updated_at:
        example: "2024-01-01T00:00:00Z"
        type: string
    type: object
  responses.TopicDetailsResponse:
    description: Response payload containing detailed topic information with feedbacks.
    properties:
      average_rating:
        example: 4.5
        type: number
      feedback_count:
        example: 10
        type: integer
      feedbacks:
        items:
          $ref: '#/definitions/responses.FeedbackResponse'
        type: array
      sentiment:
        example: positive
        type: string
      summary:
        type: string
      topic:
        example: product_functionality_features
        type: string
      topic_description:
        type: string
      topic_name:
        example: Product Functionality & Features
        type: string
    type: object
  responses.TopicStatsListResponse:
    description: Response payload containing a list of topic statistics.
    properties:
      topics:
        items:
          $ref: '#/definitions/responses.TopicStatsResponse'
        type: array
      total:
        example: 13
        type: integer
    type: object
  responses.TopicStatsResponse:
    description: Response payload containing topic statistics from the latest analysis.
    properties:
      average_rating:
        example: 4.5
        type: number
      feedback_count:
        example: 10
        type: integer
      topic:
        example: product_functionality_features
        type: string
      topic_name:
        example: Product Functionality & Features
        type: string
    type: object
  responses.UserInfo:
    description: Basic user information.
    properties:
      email:
        description: User email address
        example: user@example.com
        type: string
      id:
        description: User unique identifier
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      roles:
        description: User roles
        example:
        - '["user"]'
        items:
          type: string
        type: array
    type: object
host: localhost:8080
info:
  contact: {}
  description: This is a LLM Feedback Analysis API server.
  title: LLM Feedback Analysis API
  version: "1.0"
paths:
  /analyses:
    get:
      consumes:
      - application/json
      description: Retrieve all analyses ordered by creation date (newest first) for
        the history page
      produces:
      - application/json
      responses:
        "200":
          description: Analyses retrieved successfully
          schema:
            $ref: '#/definitions/responses.AnalysisListResponse'
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List all analyses
      tags:
      - analyses
  /analyses/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve a specific analysis with its topics and analyzed feedbacks
        with their associated topics
      parameters:
      - description: Analysis ID
        example: 550e8400-e29b-41d4-a716-446655440000
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Analysis retrieved successfully
          schema:
            $ref: '#/definitions/responses.AnalysisDetailResponse'
        "400":
          description: Bad request - invalid analysis ID format
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Analysis not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get analysis by ID
      tags:
      - analyses
  /analyses/latest:
    get:
      consumes:
      - application/json
      description: Retrieve the most recent completed analysis for the dashboard
      produces:
      - application/json
      responses:
        "200":
          description: Latest analysis retrieved successfully
          schema:
            $ref: '#/definitions/responses.AnalysisResponse'
        "204":
          description: No analysis found
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get latest analysis
      tags:
      - analyses
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate user with email and password, returns JWT token
      parameters:
      - description: User login request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.LoginUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: User authenticated successfully
          schema:
            $ref: '#/definitions/responses.LoginUserResponse'
        "400":
          description: Bad request - invalid request body
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid credentials
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Login user
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Create a new user account with email and password
      parameters:
      - description: User registration request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.RegisterUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User registered successfully
          schema:
            $ref: '#/definitions/responses.RegisterUserResponse'
        "400":
          description: Bad request - invalid request body or validation error
          schema:
            additionalProperties: true
            type: object
        "409":
          description: Conflict - email already exists
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Register a new user
      tags:
      - auth
  /feedbacks:
    get:
      consumes:
      - application/json
      description: Retrieve a list of feedback entries with optional pagination
      parameters:
      - description: 'Maximum number of feedbacks to return (default: 100)'
        example: 10
        in: query
        name: limit
        type: integer
      - description: 'Number of feedbacks to skip (default: 0)'
        example: 0
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Feedbacks retrieved successfully
          schema:
            $ref: '#/definitions/responses.FeedbackListResponse'
        "400":
          description: Bad request - invalid query parameters
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List feedbacks
      tags:
      - feedbacks
    post:
      consumes:
      - application/json
      description: Create a new feedback submission with rating and comment
      parameters:
      - description: Feedback creation request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/requests.CreateFeedbackRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Feedback created successfully
          schema:
            $ref: '#/definitions/responses.FeedbackResponse'
        "400":
          description: Bad request - invalid request body
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Create a new feedback
      tags:
      - feedbacks
      x-examples:
        comment_too_long:
          comment: This comment is way too long and exceeds the maximum allowed length
            of 1000 characters. Lorem ipsum dolor sit amet, consectetur adipiscing
            elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit
            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
            sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
            mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus
            error sit voluptatem accusantium doloremque laudantium, totam rem aperiam,
            eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae
            vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit
            aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos
            qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem
            ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam
            eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat
            voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam
            corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur?
            Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam
            nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas
            nulla pariatur?
          rating: 2
        empty_comment:
          comment: ""
          rating: 3
        full:
          comment: Overall, I'm very satisfied with the service. The response time
            was excellent and the staff was very helpful. There were a few minor issues,
            but they were quickly resolved.
          rating: 4
        invalid_rating_high:
          comment: This rating is too high
          rating: 6
        invalid_rating_low:
          comment: This rating is too low
          rating: 0
        minimal:
          comment: Great service!
          rating: 5
  /feedbacks/{id}:
    delete:
      consumes:
      - application/json
      description: Soft delete a feedback entry by its unique identifier. Requires
        admin role.
      parameters:
      - description: Feedback ID
        example: 550e8400-e29b-41d4-a716-446655440000
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Feedback deleted successfully
        "400":
          description: Bad request - invalid feedback ID format
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden - admin role required
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Feedback not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Delete feedback (Admin only)
      tags:
      - feedbacks
    get:
      consumes:
      - application/json
      description: Retrieve a specific feedback entry by its unique identifier
      parameters:
      - description: Feedback ID
        example: 550e8400-e29b-41d4-a716-446655440000
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Feedback retrieved successfully
          schema:
            $ref: '#/definitions/responses.FeedbackResponse'
        "400":
          description: Bad request - invalid feedback ID format
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Feedback not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get feedback by ID
      tags:
      - feedbacks
  /topics:
    get:
      consumes:
      - application/json
      description: Retrieve all predefined topics with feedback count and average
        rating from the latest analysis
      produces:
      - application/json
      responses:
        "200":
          description: Topics with stats retrieved successfully
          schema:
            $ref: '#/definitions/responses.TopicStatsListResponse'
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get topics with statistics
      tags:
      - topics
  /topics/{topic_enum}:
    get:
      consumes:
      - application/json
      description: Retrieve detailed information about a specific topic enum with
        all associated feedbacks
      parameters:
      - description: Topic enum value
        example: product_functionality_features
        in: path
        name: topic_enum
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Topic details retrieved successfully
          schema:
            $ref: '#/definitions/responses.TopicDetailsResponse'
        "400":
          description: Bad request - invalid topic enum
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized - invalid or missing JWT token
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Topic not found in latest analysis
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get topic details
      tags:
      - topics
securityDefinitions:
  BearerAuth:
    description: 'JWT token for authentication. Use the format: "Bearer <token>".
      This follows RFC 6750 (OAuth 2.0 Bearer Token Usage).'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
